<div class="explorer-container">

  <!-- Loader -->
  <div *ngIf="loading" class="loading">
    ⏳ Carregando pastas...
  </div>

  <!-- Breadcrumb -->
  <nav class="breadcrumb" *ngIf="breadcrumb.length > 0">
    <button class="breadcrumb-home" (click)="resetExplorer()">🏠 Raiz</button>
    <span *ngFor="let pasta of breadcrumb; let i = index">
      <span class="breadcrumb-separator">/</span>
      <button class="breadcrumb-item" (click)="navegarPara(i)">{{ pasta.nome }}</button>
    </span>
  </nav>

  <!-- Cards de Pastas e Arquivos -->
  <div class="cards-container">
    <!-- Pastas -->
    <div *ngFor="let pasta of pastaAtual?.subPastas ?? pastasRaiz"
         class="card folder-card"
         (click)="abrirPasta(pasta)">
      <div class="card-icon">📁</div>
      <div class="card-name">{{ pasta.nome }}</div>
    </div>

    <!-- Arquivos -->
    <div *ngFor="let arquivo of pastaAtual?.arquivos ?? []"
         class="card file-card"
         (click)="abrirArquivoModal(arquivo)">
      <div class="card-icon">📄</div>
      <div class="card-name">{{ arquivo.nome }}</div>
    </div>
  </div>

  <!-- Modal de arquivo -->
  <div class="modal" *ngIf="arquivoSelecionado">
    <div class="modal-content">
      <h3>Arquivo: {{ arquivoSelecionado.nome }}</h3>
      <p>Tamanho: {{ arquivoSelecionado.tamanho | number }} KB</p>
      <p>Tipo: {{ arquivoSelecionado.tipoMime }}</p>
      <div class="modal-actions">
        <button (click)="baixarArquivo(arquivoSelecionado)">⬇️ Baixar</button>
        <button (click)="visualizarArquivo(arquivoSelecionado)">👁️ Visualizar</button>
        <button (click)="fecharModal()">❌ Fechar</button>
      </div>
    </div>
  </div>

  <!-- Nenhuma pasta encontrada -->
  <p *ngIf="!loading && (pastaAtual?.subPastas?.length === 0) && (pastaAtual?.arquivos?.length === 0)">
    Nenhuma pasta ou arquivo nesta pasta.
  </p>

</div>
